jQuery(document).ready(function(){var e;Function.prototype.getHashCode=(e=0,function(){return this.hashCode||(this.hashCode="<hash|#"+e+++">"),this.hashCode});var t=function(e){return $(e)},i=function(e){var t=e.split("_",1);return"checkbox"==t?$("input[name*='"+e+"[]']"):"radio"==t?$("input[name*='"+e+"']"):$("#"+e)},n=function(e){var t;if(e instanceof Array){var i,n=[];for(i=0;i<e.length;i++){var a;a="radio"==(r=e[i].split("_",1))?"input[name='"+e[i]+"']:checked":"checkbox"==r?"input[name*='"+e[i]+"[]']:checked":"#"+e[i],n.push(a)}t=$(n.join(", "))}else{var r;t="radio"==(r=e.split("_",1))?$("input[name='"+e+"']:checked"):"checkbox"==r?$("input[name*='"+e+"[]']:checked"):$("#"+e)}return t},a=function(e,n){if("field"==e.find("target"))i(e.find("target","targetField")).val(n);else if("element"==e.find("target")){var a=t(e.find("target","targetElement"));a.size()>1?$.each(a,function(){$(this).is(":input")?$(this).val(n):$(this).text(n)}):a.is(":input")?a.val(n):a.text(n)}},r=function(){var e={},r=$("body"),o=r.outerHeight(!0);$.each(options.fieldIds,function(t,i){var n=i.split("_",1);if("checkbox"==n)e[i]=$("#"+i).is(":checked");else if("radio"==n){var a=i.split("_",2)[0]+"_"+i.split("_",2)[1];e[a]=$("input[name='"+a+"']:checked").val()}else e[i]="button"==n?$("#"+i).data("clicked"):$("#"+i).val()});var s={toShow:function(e){"field"==e.find("target")?i(e.find("target","targetField")).show().parent().closest("div.form-group").show():"element"==e.find("target")&&t(e.find("target","targetElement")).show()},toHide:function(e){"field"==e.find("target")?i(e.find("target","targetField")).hide().parent().closest("div.form-group").hide():"element"==e.find("target")&&t(e.find("target","targetElement")).hide()},toEnable:function(e){if("field"==e.find("target"))i(e.find("target","targetField")).prop("disabled",!1);else"element"==e.find("target")&&t(e.find("target","targetElement")).prop("disabled",!1)},toDisable:function(e){if("field"==e.find("target"))i(e.find("target","targetField")).prop("disabled",!0);else"element"==e.find("target")&&t(e.find("target","targetElement")).prop("disabled",!0)},performArithmeticOperations:function(e){var t,i,r,o;i=(t=e).find("operator"),r=t.find("operands"),o=NaN,i&&($.isArray(r)&&$.each(r,function(e,t){var a=n(t);if(a.size()>1)$.each(a,function(e,t){var n=parseFloat($(t).val());if(!isNaN(n))if(isNaN(o))o=n;else switch(i){case"+":o+=n;break;case"-":o-=n;break;case"*":o*=n;break;case"/":o/=n;break;case"%":o%=n}});else if(1==a.size()){var r=parseFloat(a.val());if(!isNaN(r))if(isNaN(o))o=r;else switch(i){case"+":o+=r;break;case"-":o-=r;break;case"*":o*=r;break;case"/":o/=r;break;case"%":o%=r}}}),isNaN(o)&&(o=0),a(t,o))},resetResult:function(e){if(options.submitted)return!1;a(e,0)},copy:function(e){var a,r,o,s,c,d="field"==(a=e).find("original")?n(a.find("original","originalField")):t(a.find("original","originalElement"));o=d,s="field"==(r=e).find("target")?i(r.find("target","targetField")):t(r.find("target","targetElement")),c=o.is(":input")?o.val():o.html(),o.size()>1&&(c=o.map(function(){return $(this).is(":input")?$(this).val():$(this).text()}).get().filter(Boolean).join(", ")),s.size()>1?s.is(":radio, :checkbox")?o.size()>1?($(":checkbox[name*='"+s.attr("name")+"']").prop("checked",!1),$.each(o,function(){$(this).is(":checkbox")&&(c=$(this).val(),$(":checkbox[name*='"+s.attr("name")+"'][value*='"+c+"']").prop("checked",!0))})):($(":input[name*='"+s.attr("name")+"']").prop("checked",!1),$(":input[name*='"+s.attr("name")+"'][value*='"+c+"']").prop("checked",!0)):s.is(":input")?s.val(c):s.text(c):s.is(":radio, :checkbox")?($(":input[name*='"+s.attr("name")+"']").prop("checked",!1),$(":input[name*='"+s.attr("name")+"'][value*='"+c+"']").prop("checked",!0)):s.is(":input")?s.val(c):s.html(c)},skip:function(e,t){0==$.grep(options.skips,function(e){return e.id==t}).length&&options.skips.push({id:t,from:null,to:parseInt(e.find("step"))})},resetSkip:function(e,t){options.skips=$.grep(options.skips,function(e){return e.id!=t})},formatNumber:function(e){if("field"==e.find("target")){var n=i(e.find("target","targetField")),a=numeral(n.val()).format(e.find("format"));n.val(a)}else if("element"==e.find("target")){var r=t(e.find("target","targetElement")),o=numeral(r.text()).format(e.find("format"));r.text(o)}}};$.each(options.rules,function(t,i){var n=new RuleEngine({conditions:JSON.parse(i.conditions),actions:JSON.parse(i.actions)}),a=i.opposite?{toShow:"toHide",toHide:"toShow",toEnable:"toDisable",toDisable:"toEnable",performArithmeticOperations:"resetResult",skip:"resetSkip"}:{};n.run(e,s,a)});var c=r.outerHeight(!0);o!=c&&Utils.postMessage({height:c})};$(window).load(function(){r()});var o=$("form");o.find(":input").on("keyup change click input",function(){r()}),o.on("success",function(){r()}),o.find(":button").mousedown(function(){$(this).data("clicked",!0)})});